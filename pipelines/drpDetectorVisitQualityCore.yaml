description: |
  DRP plots and metrics to assess diaSrc CcdVisit quality.  No association.
tasks:
  diaSrcCcdVisitAnalysis
    class: lsst.analysis.tools.tasks.DiaSrcCcdVisitAnalysisTask
      connections.outputName: diaSrcCcdVisit
  analyzeTrailedDiaSrcCore:
    class: lsst.analysis.tools.tasks.TrailedDiaSrcDetectorVisitAnalysisTask
    config:
      # Counts up the number of dia sources in the trailed table.
      atools.numDiaSourcesAll: NumDiaSourcesAllMetric
      connections.outputName: trailedDiaSrcCore
      python: |
        from lsst.analysis.tools.atools import *
  diffimTaskCore:
    class: lsst.analysis.tools.tasks.DiffimDetectorVisitAnalysisTask
    config:
      connections.outputName: diffimMetadata

      atools.diffimMetadataMetric: DiffimMetadataMetricTool
      atools.diffimMetadataMetric.metrics:
        # Format is "metric name in the metadata": units
        nUnmergedDiaSources: ct
        nMergedDiaSources: ct
        nGoodPixels: ct
        nBadPixels: ct
        nPixelsDetectedPositive: ct
        nPixelsDetectedNegative: ct
        nBadPixelsDetectedPositive: ct
        nBadPixelsDetectedNegative: ct
        sciencePsfSize: pixel
        templatePsfSize: pixel
        scaleScienceVarianceFactor: ct
        scaleTemplateVarianceFactor: ct
        templateCoveragePercent: percent
      python: |
        from lsst.analysis.tools.atools import DiffimMetadataMetricTool
