description: |
  Tier1 plots and metrics to assess the data quality across the whole sky
tasks:
  makeMetricTableObjectTableCore:
    class: lsst.analysis.tools.tasks.MakeMetricTableTask
    config:
      connections.metricBundleName: "objectTableCore_metrics"
      connections.outputTableName: "objectTableCore_metricsTable"
  objectTableCoreWholeSkyPlot:
    class: lsst.analysis.tools.tasks.WholeSkyAnalysisTask
    config:
      file: $ANALYSIS_TOOLS_DIR/config/objectTableCoreWholeSkyPlot.py
  makeMetricTableObjectTableCoreRefCatMatch:
    class: lsst.analysis.tools.tasks.MakeMetricTableTask
    config:
      connections.metricBundleName: "objectTable_tract_gaia_dr3_20230707_match_astrom_metrics"
      connections.outputTableName: "objectTable_tract_gaia_dr3_20230707_match_astrom_metricsTable"
  objectTableCoreRefCatMatchWholeSkyPlot:
    class: lsst.analysis.tools.tasks.WholeSkyAnalysisTask
    config:
      connections.inputName: "objectTable_tract_gaia_dr3_20230707_match_astrom_metricsTable"
      connections.outputName: "objectTableCoreRefCatMatch_wholeSky"
      atools.astromDiffMetrics_AA1_RA_coadd: WholeSkyPlotTool
      atools.astromDiffMetrics_AA1_RA_coadd.metric: "astromDiffMetrics_{band}_AA1_RA_coadd"
      atools.astromDiffMetrics_AA1_sigmaMad_RA_coadd: WholeSkyPlotTool
      atools.astromDiffMetrics_AA1_sigmaMad_RA_coadd.metric: "astromDiffMetrics_{band}_AA1_sigmaMad_RA_coadd"
      atools.astromDiffMetrics_AA1_Dec_coadd: WholeSkyPlotTool
      atools.astromDiffMetrics_AA1_Dec_coadd.metric: "astromDiffMetrics_{band}_AA1_Dec_coadd"
      atools.astromDiffMetrics_AA1_sigmaMad_Dec_coadd: WholeSkyPlotTool
      atools.astromDiffMetrics_AA1_sigmaMad_Dec_coadd.metric: "astromDiffMetrics_{band}_AA1_sigmaMad_Dec_coadd"
      atools.astromDiffMetrics_AA1_tot_coadd: WholeSkyPlotTool
      atools.astromDiffMetrics_AA1_tot_coadd.metric: "astromDiffMetrics_{band}_AA1_tot_coadd"
      atools.astromDiffMetrics_AA1_sigmaMad_tot_coadd: WholeSkyPlotTool
      atools.astromDiffMetrics_AA1_sigmaMad_tot_coadd.metric: "astromDiffMetrics_{band}_AA1_sigmaMad_tot_coadd"
      python: |
        from lsst.analysis.tools.atools import *
  makeMetricTableMatchedVisitCore:
    class: lsst.analysis.tools.tasks.MakeMetricTableTask
    config:
      connections.metricBundleName: "matchedVisitCore_metrics"
      connections.outputTableName: "matchedVisitCore_metricsTable"
      inputDataDimensions: ["instrument", "skymap", "tract"]
  matchedVisitCoreWholeSkyPlot:
    class: lsst.analysis.tools.tasks.WholeSkyAnalysisTask
    config:
      connections.inputName: "matchedVisitCore_metricsTable"
      connections.outputName: "matchedVisitCore_wholeSky"
      file: $ANALYSIS_TOOLS_DIR/config/matchedVisitCoreWholeSkyPlot.py
